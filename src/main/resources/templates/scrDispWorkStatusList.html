<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head style="height: 100%;">
<meta charset="UTF-8">
<title>ログイン</title>
<!--リセットＣＳＳ-->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/destyle.css@4.0.0/destyle.min.css">
<!--Font Awesome(無償版)のアイコン-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<!-- jQueryがレスポンシブに対応するため必要になるコード...らしい-->
<!-- 参考：https://job-support.ne.jp/blog/javascript/howto-jquery-->
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- ▽や△のアイコンをCSSで使うためにリンクを貼る -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">

<!-- ローカルストレージをクリアしてTopページにリダイレクトするJavaScript -->
<script type="text/javascript">
	function clearLocalStorageAndRedirect() {
		// ローカルストレージをクリア
		localStorage.clear();
		// 新しいページにリダイレクト
		window.location.href = "/rakulog/indexQR";
	}
</script>

<!--オリジナルＣＳＳ(常に最新のcssを読込むよう工夫)-->
<script type="text/JavaScript">
<!--
   document.write('<link href="/rakulog/css/style.css?ver='+ new Date().getTime() +'" rel="stylesheet" type="text/css">');
//-->
</script>

<!--オリジナルJavaScript(常に最新を読込むよう工夫)-->
<script type="text/JavaScript">
<!--
   document.write('<script src="/rakulog/js/scrDispWorkStatusList.js?ver='+ new Date().getTime() +'"></script>');
//-->
</script>


<!-- 
	サーバでデプロイする場合、CSS,JavaScript,画像などはドキュメントルート（※）内に配置すること
	※例
	  ＣＳＳ    ：/var/www/html/css
	  JavaScript：/var/www/html/js
	  画像      ：/var/www/html/images
 -->


 
</head>
<body>

<header class="ymd-header">
   作業状況表示
</header>
<div class="ymd-navigation">
	<div style="width: 50%;"><a href="javascript:void(0);" onclick="clearLocalStorageAndRedirect()">&lt;&lt; 作業者を変更</a></div>
	<div style="width: 50%;"><a th:href="@{/rakulog/indexQR}">&lt;&lt; 最初に戻る</a></div>
</div>

<center>
<div class="ymd-base-container">
	<br>
	<form name="sendForm"  th:action="@{/rakulog/EditWorkStatus}" th:object="${formDispWorkStatusList}" th:method="post" style="width: 100%;">
		
		<!-- ユーザ表示エリア -->
		<input type="hidden" id="loginEmployeeId"     th:field="*{loginEmployeeId}" />
		<input type="hidden" id="loginEmployeeName"   th:field="*{loginEmployeeName}" />
		<input type="hidden" id="selectedDeviceLabel" th:field="*{selectedDeviceLabel}" />
		<input type="hidden" id="editAuthority"       th:field="*{editAuthority}" />
		<input type="hidden" id="pushButtonKbn"       th:field="*{pushButtonKbn}" />
		<div class="ymd-login-username" style="width: 100%;">
			作業者名：<p th:text="*{loginEmployeeName}"></p>
		</div>
		
		<br>
		
		<!-- メッセージ表示エリア(編集が認められたユーザである場合のみ表示される) -->
		<th:block th:if="*{editAuthority == true}" >
		
		<div class="ymd-container" style="width: 100%;">
			チェックを入れて「チェックのみ完了」を押すことでその作業を完了させることができます。
		</div>
		
		<div class="ymd-container"  style="width: 100%;">
			※表示されている全ての作業情報を完了させたい場合は「全作業を完了」ボタンを押してください。
		</div>
		<br>
		</th:block>
		
		
		<!-- 作業中の作業を表示 -->
		<div name="workDispArea" th:each="list,stat : *{strWorkStatusDetailList}" style="width: 100%;">
			
			<!-- 非表示項目 -->
			<input type="hidden" name="houseId"          th:field="*{strWorkStatusDetailList[__${stat.index}__].houseId}" />
			<input type="hidden" name="colNo"            th:field="*{strWorkStatusDetailList[__${stat.index}__].colNo}" />
			<input type="hidden" name="workId"           th:field="*{strWorkStatusDetailList[__${stat.index}__].workId}" />
			<input type="hidden" name="startDateTime"    th:field="*{strWorkStatusDetailList[__${stat.index}__].startDateTime}" />
			
			<!-- 終了のチェックボックス＋作業情報表示エリア   -->
			<div class="ymd-list-detail-container" name="detail-row" style="width: 100%; display:flex">
				
				<!-- 編集権限がある場合は未完作業情報に加えチェックボックスも表示 -->
				<th:block th:if="*{editAuthority == true}" >
				<div class="ymd-list-detail-data" style="width: 30px;">
					<input type="checkbox" class="ymd-checkbox" id="deleteCheckBox" name="deleteCheckBox" th:field="*{strWorkStatusDetailList[__${stat.index}__].deleteCheckBox}">
				</div>
				<div class="ymd-list-detail-data" style="width: calc(100% - 30px);">
					<span th:text="*{strWorkStatusDetailList[__${stat.index}__].dispDetailInfo}" />
				</div>
				</th:block>
				
				<!-- 編集権限がない場合は未完作業情報のみ表示 -->
				<th:block th:if="*{editAuthority == false}" >
				<div class="ymd-list-detail-data" style="width: 100%;">
					<span th:text="*{strWorkStatusDetailList[__${stat.index}__].dispDetailInfo}" />
				</div>
				</th:block>
			</div>
			
			
		</div>
		
		<br>
		
		<!-- チェックのみ完了ボタン(特別ユーザ、管理者ユーザの場合のみ表示される)   -->
		<th:block th:if="*{editAuthority == true}" >
		<div class="ymd-button" style="width: 100%;">
			<a name="checkedWorEnd">チェックのみ完了</a>
		</div>
		<br>
		</th:block>
		
		<!-- 全作業を完了ボタン(特別ユーザ、管理者ユーザの場合のみ表示される)   -->
		<th:block th:if="*{editAuthority == true}" >
		<div class="ymd-button" style="width: 100%;">
			<a name="allWorkEnd">全作業を完了</a>
		</div>
		<br>
		</th:block>
		
		<!-- 閉じるボタン   -->
		<div class="ymd-button" style="width: 100%;">
			<a name="close">閉じる</a>
		</div>
		<br>
	</form>
</div>








</center>


</body>
</html>